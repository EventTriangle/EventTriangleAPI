jobs:
  - job: 'Build_Pack'
    displayName: 'Build & Drop Artifact'
    steps:
      - checkout: self
        fetchDepth: 0

      - task: UseDotNet@2
        displayName: 'Install .NET 6.x SDK'
        inputs:
          packageType: sdk
          version: 6.x

      - task: DotNetCoreCLI@2
        displayName: 'Dotnet build Release'
        inputs:
          command: 'build'
          projects: './src/sender/EventTriangleAPI.Sender.Presentation'
          arguments: '-c Release --no-restore'

      - task: DotNetCoreCLI@2
        displayName: 'Dotnet Publish'
        inputs:
          command: 'publish'
          publishWebProjects: false
          projects: './src/sender/EventTriangleAPI.Sender.Presentation'
          arguments: '-c Release -o $(Build.ArtifactStagingDirectory)/Release --no-build'

      - task: PublishBuildArtifacts@1
        displayName: 'Publish Artifacts'
        inputs:
          PathtoPublish: '$(Build.ArtifactStagingDirectory)'
          ArtifactName: 'drop'
          publishLocation: 'Container'
